<!DOCTYPE html>
<html lang="en">
<head>
    <title>View Students</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family:'Poppins',sans-serif;
            color:white; height:100vh; margin:0; overflow:auto; 
            background: linear-gradient(-45deg,#1a1a2e,#162447,#1a1a2e,#0f0f1f); 
            background-size:400% 400%; animation:gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0%{background-position:0% 50%;}
            50%{background-position:100% 50%;}
            100%{background-position:0% 50%;}
        }
        #particles-js {position:absolute;width:100%;height:100%;z-index:-1;}
        .floating-card {
            background: rgba(255,255,255,0.05); 
            border-radius:20px; padding:20px; 
            width:90%; max-width:900px; 
            text-align:center; 
            backdrop-filter: blur(15px);
        }
        .table td a { display: inline-block; margin: 3px; padding: 6px 12px; width:100%; color:white;}
        th, td {padding:10px; text-align:center;}
        th {border-bottom:1px solid cyan;}
        a, button {margin:5px; text-decoration:none; color:white; background:#4ecca3; padding:5px 10px; border-radius:5px;}
        a:hover, button:hover {background:#3ba77b;}
    
        .text-center input { margin-top: 15px; }
        .d-flex a { padding: 6px 12px; border-radius: 6px; font-size: 13px; }

    </style>
</head>
<body>
    <div id="particles-js"></div>

    <div class="d-flex justify-content-center align-items-start mt-5 mb-5">
        <div class="floating-card">

            <h2>Students List</h2>

            <a href="{{ url_for('export_excel') }}">Export Excel</a>
            <a href="{{ url_for('export_pdf') }}">Export PDF</a>
            <a href="{{ url_for('chart') }}">View Chart</a>
            <a href="{{ url_for('delete_all') }}" onclick="return confirm('Delete all students?')">Delete All</a>
            <a href="{{ url_for('logout') }}" onclick="return confirm('Are you sure you want to logout?')">Logout</a>

            <!-- ðŸ” SEARCH INPUT -->
            <div class="text-center mb-4 mt-3">
                <input type="text" id="searchInput" class="form-control w-50 m-auto" placeholder="Search student...">
            </div>

            <!-- ðŸ§¾ FIXED TABLE STRUCTURE -->
            <table class="table table-dark table-hover" id="studentTable">
                <thead>
                    <tr>
                        <th>ID</th><th>Name</th><th>Email</th><th>Course</th><th>Date</th><th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for s in students %}
                    <tr>
                        <td>{{ s[0] }}</td>
                        <td>{{ s[1] }}</td>
                        <td>{{ s[2] }}</td>
                        <td>{{ s[3] }}</td>
                        <td>{{ s[4] }}</td>
                        <td>
                            <a href="{{ url_for('edit', id=s[0]) }}">Edit</a>
                            <a href="{{ url_for('delete_student', id=s[0]) }}" onclick="return confirm('Delete this student?')">Delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>
    </div>

    <!-- Particle JS -->
    <script>
        particlesJS("particles-js", {
            "particles": {"number":{"value":80,"density":{"enable":true,"value_area":800}}, "color":{"value":"#00ffff"}, "shape":{"type":"circle"}, "opacity":{"value":0.5,"random":true}, "size":{"value":3,"random":true}, "line_linked":{"enable":true,"distance":150,"color":"#00ffff","opacity":0.4,"width":1}, "move":{"enable":true,"speed":2,"out_mode":"out"}},
            "interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"repulse"},"onclick":{"enable":true,"mode":"push"},"resize":true},"modes":{"repulse":{"distance":100},"push":{"particles_nb":4}}},
            "retina_detect": true
        });
    </script>

    <!-- ðŸ” SEARCH FUNCTION -->
    <script>
        document.getElementById("searchInput").addEventListener("keyup", function () {
            let filter = this.value.toLowerCase();
            let rows = document.querySelectorAll("#studentTable tbody tr");

            rows.forEach(row => {
                let text = row.textContent.toLowerCase();
                row.style.display = text.includes(filter) ? "" : "none";
            });
        });
    </script>

</body>
</html>
